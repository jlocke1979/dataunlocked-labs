<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Club Dispersion</title>
<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
</head>

<body>

<h2>Club Fitting Dispersion</h2>
<div id="chart"></div>

<script>

const width = 800;
const height = 450;

const svg = d3.select("#chart")
  .append("svg")
  .attr("width", width)
  .attr("height", height);

d3.csv("data/fitting.csv").then(data => {

  data = data.map(d => ({
    club: d.Club.trim(),
    carry: +d["Carry (YDS)"],
    sidespin: +d["Sidespin (RPM)"]
  }))
  .filter(d => !isNaN(d.carry) && !isNaN(d.sidespin));

  console.log("Loaded rows:", data.length);

  const x = d3.scaleLinear()
    .domain(d3.extent(data,d=>d.sidespin))
    .range([60,width-40]);

  const y = d3.scaleLinear()
    .domain(d3.extent(data,d=>d.carry))
    .range([height-40,40]);

  svg.append("g")
    .attr("transform",`translate(0,${height-40})`)
    .call(d3.axisBottom(x));

  svg.append("g")
    .attr("transform","translate(60,0)")
    .call(d3.axisLeft(y));

  svg.selectAll("circle")
    .data(data)
    .join("circle")
    .attr("cx",d=>x(d.sidespin))
    .attr("cy",d=>y(d.carry))
    .attr("r",4)
    .attr("fill","#2a6f97")
    .attr("opacity",0.7);

});

</script>

</body>
</html>
